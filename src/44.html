<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>闭包应用</h1>
    <button id="btn">click</button>
    <button id="btn2">click2</button>
    <script>
        // function observerEvent(element, type, fn){
        //     if(element.addEventListener) {
        //     console.log('11')
        //         observerEvent = function(element, type, fn) {
        //             element.addEventListener(type, fn)
        //         }
        //     } else if (element.attachEvent) {
        //     console.log('22')
        //         observerEvent = function(element, type, fn) {
        //             element.attachEvent(type, fn)
        //         }
        //     } else {
        //     console.log('33')
        //         observerEvent = function(element, type, fn) {
        //             element['on' + type] = fn
        //         }                    
        //     }
        //     observerEvent(element, type, fn)
        // }
        // var btn = document.querySelector('#btn')
        // var btn2 = document.querySelector('#btn2')
        // observerEvent(btn, 'click', function(){
        //     console.log('btn')
        // })
        // observerEvent(btn2, 'click', function(){
        //     console.log('btn2')
        // })


        // const add1 = (x) => x + 1;
        // const mul3 = (x) => x * 3;
        // const div2 = (x) => x / 2;

        // console.log( add1(mul3(div2(4))) )
        // console.log( compose(add1, mul3, div2)(4) )
        // function compose(...funcs) {
        //     return function(val){
        //         if(funcs.length == 0) return val;
        //         if(funcs.length === 1) {
        //             return funcs[0](val)
        //         }                    
        //         return funcs.reverse().reduce((prev, cur) => {
        //             return cur(prev)
        //         }, val)
        //     }
        // }


        // "use strict";
        // (function(){
        //     console.log(this)
        // })()

        // let obj = {
        //     fn: (function(){
        //         console.log(this)
        //         return function(){}
        //     })()
        // }
        

        // var num = 10;
        // var obj = {
        //     num: 20
        // };
        // obj.fn = (function(num){
        //     this.num = num * 3;
        //     num++;
        //     return function(n) {
        //         this.num += n;
        //         num++;
        //         console.log(num)
        //     }
        // })(obj.num)
        // var fn = obj.fn;
        // fn(5)
        // obj.fn(10)
        // console.log(num, obj.num)

        // function fn1(){console.log(1)}
        // function fn2(){console.log(2)}
        // fn1.call(fn2)  // 1
        // fn1.call.call(fn2) // fn2[key] = fn1.call()  window[key] = fn2()
        // Function.prototype.call(fn1)  // 
        // Function.prototype.call.call(fn1)  //fn1[key] = call   


        // var obj = {
        //     name: 'yu'
        // } 
        // function func(x, y) {
        //     console.log(this, x, y)
        // }
        // Function.prototype.myCall = function(context, ...args) {
        //     context == undefined ? context = window : null
        //     if(/!(function|object).test(typeof context)/) {
        //         if(/(bigint|symbol)/.test(typeof context)){
        //             context = Object(context)
        //         } else {
        //             context = new context.constructor(context)
        //         }
        //     }
        //     let key = Symbol();
        //     context[key] = this;
        //     let result = context[key](...args);
        //     delete context[key];
        //     return result;
        // }
        // func.myCall(Symbol('AA'), 1, 2)

        // let ary = [12, 23, 12, 13, 13, 12, 23, 14, 8]
        // Array.prototype.myUnique = function () {
        //     const arr = this;
        //     const len = arr.length;
        //     let arr1 = [arr[0]];
        //     for(let i = 1; i < len; i++) {
        //         let item = arr[i]
        //          if(!arr1.includes(item)){
        //              arr1.push(item)
        //          }
        //     }
        //     return arr1;
        // }
        // Array.prototype.mySort = function() {
        //     const arr = this;
        //     const len = arr.length;
        //     let arr1 = [arr[0]];
        //     for(let i = 1; i < len; i++) {
        //         let item = arr[i]
        //         for(let j = 0; j < arr1.length; j++) {
        //             let itn = arr1[i]
        //             if(itn > item) {
        //                 arr1.push(item)
        //                 break;
        //             } else {
                        
        //             }
        //         }
        //     }
        // }
        // // console.log(ary.myUnique());
        
        // arr.myUnique().mySort() // [8, 12, 13, 14, 23];


        // (EC(G) x = 3;  
        // obj = {x: 5, fn: function(y){...}}
        // var x = 234, obj = {x: 95};
        // obj.fn = (function(){
        //     this.x *= ++x;
        //     return function(y) {
        //         this.x *=(++x)+y; // 19 * 5 = 95   // 18*13=234
        //         console.log(x) //  13
        //     }
        // })();
        // var fn = obj.fn;
        // obj.fn(6); // 
        // fn(4); // 
        // console.log(obj.x, x); // 


        // 
        // var fullName = 'language';
        // var obj = {
        //     fullName: 'javascript',
        //     prop: {
        //         getFullName: function() {
        //             return this.fullName;
        //         }
        //     }
        // };
        // console.log(obj.prop.getFullName())   // undefined
        // var test = obj.prop.getFullName  
        // console.log(test()) //language

        // ~function(){
        //     function change(){

        //     }
        //     Function.prototype.change = change;
        // }()
        // let obj = {
        //     name: 'zhufeng'
        // };

        // function func(x, y) {
        //     this.total = x + y;
        //     return this;
        // }
        // let res = func.change(obj, 100, 200);


        // var name = '珠峰培训';
        // function A(x, y) {
        //     var res = x + y;
        //     console.log(res, this.name);            
        // }

        // function B(x, y) {
        //     var res = x - y;
        //     console.log(res, this.name);
        // }
        // B.call(A, 40, 30) // 10, A
        // B.call.call.call(A, 20, 10)  // A.xx = B.call.call(20, 10)  20.xx=A(10)
        // Function.prototype.call(A, 60, 50) //
        // Function.prototype.call.call.call(A, 80, 70) //A.xx=  80.xx=A(70)  70.xx= 


        // ~function(){
        //     function myBind(context, ...args) {
        //         context == undefined ? context = window: null
        //         const _this = this;
        //         return function anonymous(...innerArgs){
        //             _this.call(context, ...args.concat(innerArgs))
        //         }
        //     }
        //     Function.prototype.myBind = myBind
        // }()



        // EC(G) 
        // function Foo(){..}      getName---4
        function Foo(){
            getName = function(){
                console.log(1);
            }
            return this;
        }

        Foo.getName = function(){
            console.log(2);            
        }
        Foo.prototype.getName = function(){
            console.log(3);            
        }
        var getName = function(){
            console.log(4);            
        }
        function getName(){
            console.log(5);            
        }
        Foo.getName(); //2
        getName() // 4
        Foo().getName(); 1
        getName(); // 1
        new Foo.getName() //2
        new Foo().getName() // 3
        new new Foo().getName() // 3
    </script>
</body>
</html>

